<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Lost & Found Community</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
    
    <style>
        :root {
            --bg-color: #F7F9FC;
            --primary: #9AC6C5;       /* ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏û‡∏≤‡∏™‡πÄ‡∏ó‡∏•‡∏ï‡∏∏‡πà‡∏ô‡πÜ */
            --primary-dark: #77A8A7;
            --secondary: #A5DEE5;     /* ‡∏ü‡πâ‡∏≤‡∏û‡∏≤‡∏™‡πÄ‡∏ó‡∏• */
            --accent-pink: #FFC4C4;   /* ‡∏ä‡∏°‡∏û‡∏π‡∏û‡∏≤‡∏™‡πÄ‡∏ó‡∏• */
            --accent-yellow: #FFE5A9; /* ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡∏û‡∏≤‡∏™‡πÄ‡∏ó‡∏• */
            --text-main: #555;
            --white: #FFFFFF;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: 'Kanit', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            margin: 0;
            padding: 0;
            padding-bottom: 80px; /* ‡πÄ‡∏ß‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ‡πÄ‡∏°‡∏ô‡∏π‡∏•‡πà‡∏≤‡∏á */
        }

        /* --- Header --- */
        .app-header {
            background: var(--white);
            padding: 15px 20px;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.03);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .app-logo {
            font-size: 1.4rem;
            font-weight: 600;
            color: var(--primary-dark);
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* --- Tab System (Pages) --- */
        .page { display: none; animation: fadeIn 0.3s ease; }
        .page.active { display: block; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- Feed Page Styling --- */
        .search-bar {
            padding: 15px 20px;
            background: var(--white);
        }

        .search-input-box {
            background: #EFF2F5;
            border-radius: 12px;
            padding: 10px 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .search-input-box input {
            border: none;
            background: transparent;
            font-family: 'Kanit';
            width: 100%;
            font-size: 1rem;
            outline: none;
        }

        .filters {
            display: flex;
            gap: 10px;
            padding: 0 20px 15px 20px;
            background: var(--white);
            overflow-x: auto;
            white-space: nowrap;
        }

        .filter-chip {
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            background: #EFF2F5;
            color: #888;
            border: 1px solid transparent;
            cursor: pointer;
            transition: 0.2s;
        }

        .filter-chip.active {
            background: var(--primary);
            color: white;
            box-shadow: 0 4px 10px rgba(154, 198, 197, 0.4);
        }

        .feed-list {
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* --- Card Design --- */
        .feed-card {
            background: var(--white);
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.04);
            position: relative;
        }

        .card-header {
            padding: 12px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .avatar {
            width: 35px;
            height: 35px;
            background: #EEE;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .post-time {
            font-size: 0.75rem;
            color: #AAA;
        }

        .card-image {
            width: 100%;
            height: 250px;
            background: #F0F0F0;
            object-fit: cover;
        }

        .status-badge {
            position: absolute;
            top: 60px;
            right: 15px;
            padding: 5px 12px;
            border-radius: 12px;
            color: white;
            font-size: 0.8rem;
            font-weight: 600;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        .status-lost { background: var(--accent-pink); color: #B95E5E; }
        .status-found { background: var(--secondary); color: #3E7C85; }

        .card-body { padding: 15px; }
        
        .card-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .card-desc {
            font-size: 0.9rem;
            color: #777;
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .card-footer {
            border-top: 1px solid #F0F0F0;
            padding: 12px 15px;
            background: #FAFAFA;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .contact-btn {
            background: var(--primary-dark);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 10px;
            font-size: 0.9rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* --- Post Form Page --- */
        .form-container { padding: 20px; }
        
        .input-group { margin-bottom: 20px; }
        .input-group label { display: block; margin-bottom: 8px; font-weight: 500; }
        .input-group input, .input-group textarea {
            width: 100%; padding: 15px;
            border: 2px solid #EEE; border-radius: 15px;
            font-family: 'Kanit'; outline: none;
            transition: 0.3s;
        }
        .input-group input:focus, .input-group textarea:focus { border-color: var(--primary); }

        .type-switch {
            display: flex; gap: 10px; margin-bottom: 20px;
        }
        .type-btn {
            flex: 1; padding: 15px; border-radius: 15px;
            border: 2px solid #EEE; background: white;
            text-align: center; cursor: pointer; font-weight: 600;
            transition: 0.2s;
        }
        .type-btn.active-lost { background: var(--accent-pink); color: #8a3b3b; border-color: var(--accent-pink); }
        .type-btn.active-found { background: var(--secondary); color: #2e626b; border-color: var(--secondary); }

        .submit-btn {
            width: 100%; padding: 15px; background: var(--primary-dark);
            color: white; border: none; border-radius: 15px;
            font-size: 1.1rem; font-weight: 600; cursor: pointer;
            box-shadow: 0 5px 15px rgba(119, 168, 167, 0.4);
        }

        /* --- Bottom Navigation --- */
        .bottom-nav {
            position: fixed;
            bottom: 0; left: 0; right: 0;
            background: white;
            padding: 10px 30px;
            border-top-left-radius: 25px;
            border-top-right-radius: 25px;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.05);
            display: flex;
            justify-content: space-around;
            align-items: center;
            z-index: 200;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: #CCC;
            font-size: 0.8rem;
            cursor: pointer;
            transition: 0.3s;
        }

        .nav-item span { font-size: 28px; margin-bottom: 2px; }
        .nav-item.active { color: var(--primary-dark); transform: translateY(-5px); }

        /* Floating Add Button */
        .fab {
            width: 60px; height: 60px;
            background: var(--primary-dark);
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            color: white;
            position: absolute;
            top: -30px;
            box-shadow: 0 5px 15px rgba(119, 168, 167, 0.5);
            border: 4px solid var(--bg-color);
        }
    </style>
</head>
<body>

    <header class="app-header">
        <div class="app-logo">
            <span class="material-icons-round" style="color:var(--primary-dark)">travel_explore</span>
            Lost & Found
        </div>
        <div class="avatar" style="background:var(--accent-yellow)">üë§</div>
    </header>

    <div id="page-feed" class="page active">
        <div class="search-bar">
            <div class="search-input-box">
                <span class="material-icons-round" style="color:#AAA">search</span>
                <input type="text" id="searchInput" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏¥‡πà‡∏á‡∏Ç‡∏≠‡∏á..." onkeyup="filterItems()">
            </div>
        </div>

        <div class="filters">
            <div class="filter-chip active" onclick="setFilter('all', this)">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
            <div class="filter-chip" onclick="setFilter('lost', this)">‡∏Ç‡∏≠‡∏á‡∏´‡∏≤‡∏¢</div>
            <div class="filter-chip" onclick="setFilter('found', this)">‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏î‡πâ</div>
        </div>

        <div id="feedList" class="feed-list">
            </div>
    </div>

    <div id="page-post" class="page">
        <div class="form-container">
            <h2 style="margin-top:0; color:var(--primary-dark);">‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà</h2>
            
            <form id="postForm">
                <div class="type-switch">
                    <div id="btn-lost" class="type-btn active-lost" onclick="selectType('lost')">üò≠ ‡∏Ç‡∏≠‡∏á‡∏´‡∏≤‡∏¢</div>
                    <div id="btn-found" class="type-btn" onclick="selectType('found')">ü•∞ ‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏î‡πâ</div>
                </div>
                <input type="hidden" id="postType" value="lost">

                <div class="input-group">
                    <label>‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)</label>
                    <div onclick="document.getElementById('fileInput').click()" style="border:2px dashed #DDD; padding:20px; text-align:center; border-radius:15px; background:white; cursor:pointer;">
                        <span id="uploadText" style="color:#AAA; font-size:0.9rem;">‡πÅ‡∏ï‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</span>
                        <img id="preview" style="max-width:100%; max-height:200px; display:none; border-radius:10px; margin:0 auto;">
                    </div>
                    <input type="file" id="fileInput" accept="image/*" style="display:none">
                </div>

                <div class="input-group">
                    <label>‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡πà‡∏á‡∏Ç‡∏≠‡∏á</label>
                    <input type="text" id="itemName" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏Å‡∏∏‡∏ç‡πÅ‡∏à‡∏£‡∏ñ, ‡πÅ‡∏°‡∏ß‡∏™‡∏µ‡∏™‡πâ‡∏°" required>
                </div>

                <div class="input-group">
                    <label>‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà</label>
                    <input type="text" id="location" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡πÇ‡∏£‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£, ‡∏ï‡∏∂‡∏Å 3" required>
                </div>

                <div class="input-group">
                    <label>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</label>
                    <textarea id="desc" rows="3" placeholder="‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞‡πÄ‡∏î‡πà‡∏ô..."></textarea>
                </div>

                <div class="input-group">
                    <label>‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠</label>
                    <input type="text" id="contact" placeholder="‡πÄ‡∏ä‡πà‡∏ô Line ID, ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£" required>
                </div>

                <button type="submit" class="submit-btn">‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®</button>
            </form>
        </div>
    </div>

    <nav class="bottom-nav">
        <div class="nav-item active" onclick="switchPage('feed', this)">
            <span class="material-icons-round">home</span>
            ‡∏´‡∏ô‡πâ‡∏≤‡∏ü‡∏µ‡∏î
        </div>
        <div style="position:relative; width: 60px;">
            <div class="fab" onclick="switchPage('post', document.getElementById('nav-add'))">
                <span class="material-icons-round" style="font-size:30px;">add</span>
            </div>
        </div>
        <div class="nav-item" id="nav-add" onclick="switchPage('post', this)">
            <span class="material-icons-round">post_add</span>
            ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á
        </div>
    </nav>

    <script>
        // --- Database Setup (Mock) ---
        const DB_KEY = 'socialLostFoundDB';
        
        // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏°‡πà‡πÇ‡∏•‡πà‡∏á‡∏ï‡∏≠‡∏ô‡πÄ‡∏õ‡∏¥‡∏î‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å)
        const demoData = [
            {
                id: 1, type: 'found', name: '‡∏ö‡∏±‡∏ï‡∏£‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (‡∏°.4/2)', location: '‡πÇ‡∏£‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£',
                desc: '‡πÄ‡∏à‡∏≠‡∏ö‡∏ô‡πÇ‡∏ï‡πä‡∏∞‡∏Å‡∏¥‡∏ô‡∏Ç‡πâ‡∏≤‡∏ß ‡πÅ‡∏ñ‡∏ß‡∏£‡πâ‡∏≤‡∏ô‡∏Å‡πã‡∏ß‡∏¢‡πÄ‡∏ï‡∏µ‡πã‡∏¢‡∏ß ‡∏°‡∏≤‡∏£‡∏±‡∏ö‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á‡∏Ñ‡∏£‡∏±‡∏ö',
                contact: '‡∏Ñ‡∏£‡∏π‡∏™‡∏°‡∏ä‡∏≤‡∏¢', date: '10 ‡∏ô‡∏≤‡∏ó‡∏µ‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß', image: null
            },
            {
                id: 2, type: 'lost', name: 'AirPods Gen 3', location: '‡∏´‡πâ‡∏≠‡∏á‡∏™‡∏°‡∏∏‡∏î',
                desc: '‡πÄ‡∏Ñ‡∏™‡∏•‡∏≤‡∏¢‡∏´‡∏°‡∏µ‡∏û‡∏π‡∏´‡πå ‡∏ó‡∏≥‡∏´‡∏•‡πà‡∏ô‡πÑ‡∏ß‡πâ‡∏ä‡πà‡∏ß‡∏á‡∏û‡∏±‡∏Å‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏á ‡πÉ‡∏Ñ‡∏£‡πÄ‡∏à‡∏≠‡∏°‡∏µ‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏±‡∏ö',
                contact: 'Line: boy123', date: '1 ‡∏ä‡∏°. ‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß', image: null
            }
        ];

        // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ Demo Data
        let items = JSON.parse(localStorage.getItem(DB_KEY));
        if (!items || items.length === 0) {
            items = demoData;
            localStorage.setItem(DB_KEY, JSON.stringify(items));
        }

        let currentImage = null;
        let currentFilter = 'all';

        // --- Core Functions ---
        
        function renderFeed() {
            const list = document.getElementById('feedList');
            list.innerHTML = '';
            
            const searchText = document.getElementById('searchInput').value.toLowerCase();
            
            // Filter & Sort
            const filteredItems = items.filter(item => {
                const matchesType = currentFilter === 'all' || item.type === currentFilter;
                const matchesSearch = item.name.toLowerCase().includes(searchText) || 
                                      item.location.toLowerCase().includes(searchText);
                return matchesType && matchesSearch;
            }).reverse(); // Show newest first

            filteredItems.forEach(item => {
                const isLost = item.type === 'lost';
                const badgeClass = isLost ? 'status-lost' : 'status-found';
                const badgeText = isLost ? '‡∏ï‡∏≤‡∏°‡∏´‡∏≤' : '‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏î‡πâ';
                const icon = isLost ? 'üò≠' : 'ü•∞';
                
                // Image Logic
                let imgHTML = '';
                if(item.image) {
                    imgHTML = `<img src="${item.image}" class="card-image">`;
                }

                const card = `
                    <div class="feed-card">
                        <div class="card-header">
                            <div class="user-profile">
                                <div class="avatar">${icon}</div>
                                <div>
                                    <div>${isLost ? '‡∏°‡∏µ‡∏Ñ‡∏ô‡∏Ç‡∏≠‡∏á‡∏´‡∏≤‡∏¢' : '‡∏û‡∏•‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏î‡∏µ'}</div>
                                    <div class="post-time">${item.date}</div>
                                </div>
                            </div>
                        </div>
                        
                        ${imgHTML}
                        <span class="status-badge ${badgeClass}">${badgeText}</span>
                        
                        <div class="card-body">
                            <div class="card-title">${item.name}</div>
                            <div style="color:#999; font-size:0.9rem; margin-bottom:5px;">
                                <span class="material-icons-round" style="font-size:14px; vertical-align:middle;">place</span> 
                                ${item.location}
                            </div>
                            <div class="card-desc">${item.desc || '-'}</div>
                        </div>

                        <div class="card-footer">
                            <span style="font-size:0.8rem; color:#AAA;">#${item.id}</span>
                            <button class="contact-btn" onclick="alert('‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠: ${item.contact}')">
                                <span class="material-icons-round" style="font-size:16px;">chat</span>
                                ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠
                            </button>
                        </div>
                    </div>
                `;
                list.innerHTML += card;
            });
        }

        // --- Form Logic ---
        function selectType(type) {
            document.getElementById('postType').value = type;
            document.getElementById('btn-lost').className = `type-btn ${type === 'lost' ? 'active-lost' : ''}`;
            document.getElementById('btn-found').className = `type-btn ${type === 'found' ? 'active-found' : ''}`;
        }

        // Image Handling
        document.getElementById('fileInput').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (!file) return;
            const reader = new FileReader();
            reader.onload = function(ev) {
                // Resize for storage saving
                const img = new Image();
                img.onload = function() {
                    const canvas = document.createElement('canvas');
                    const ctx = canvas.getContext('2d');
                    const maxW = 400;
                    const scale = maxW / img.width;
                    canvas.width = maxW;
                    canvas.height = img.height * scale;
                    ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                    
                    currentImage = canvas.toDataURL('image/jpeg', 0.6);
                    document.getElementById('preview').src = currentImage;
                    document.getElementById('preview').style.display = 'block';
                    document.getElementById('uploadText').style.display = 'none';
                }
                img.src = ev.target.result;
            }
            reader.readAsDataURL(file);
        });

        // Submit Form
        document.getElementById('postForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const newItem = {
                id: Date.now(),
                type: document.getElementById('postType').value,
                name: document.getElementById('itemName').value,
                location: document.getElementById('location').value,
                desc: document.getElementById('desc').value,
                contact: document.getElementById('contact').value,
                image: currentImage,
                date: '‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà'
            };

            items.push(newItem);
            try {
                localStorage.setItem(DB_KEY, JSON.stringify(items));
                alert('‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!');
                
                // Reset & Go to Feed
                e.target.reset();
                currentImage = null;
                document.getElementById('preview').style.display = 'none';
                document.getElementById('uploadText').style.display = 'block';
                switchPage('feed', document.querySelector('.nav-item'));
                
            } catch (err) {
                alert('‡πÄ‡∏°‡∏°‡πÄ‡∏ï‡πá‡∏°! ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏ö‡πÇ‡∏û‡∏™‡∏ï‡πå‡πÄ‡∏Å‡πà‡∏≤‡πÜ');
            }
        });

        // --- Navigation Logic ---
        function switchPage(pageId, navEl) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            // Show selected page
            document.getElementById('page-' + pageId).classList.add('active');
            
            // Update Nav
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            if(navEl) navEl.classList.add('active');

            // If switching to feed, re-render
            if(pageId === 'feed') renderFeed();
        }

        function setFilter(type, chip) {
            currentFilter = type;
            document.querySelectorAll('.filter-chip').forEach(c => c.classList.remove('active'));
            chip.classList.add('active');
            renderFeed();
        }

        function filterItems() {
            renderFeed();
        }

        // Init
        renderFeed();

    </script>
</body>
</html>
